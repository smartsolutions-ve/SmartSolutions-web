{% load static %}

<div id="form-container" class="w-full">
    <form
        hx-post="{% url 'landing:contacto_submit' %}"
        hx-target="#form-container"
        hx-swap="outerHTML"
        class="space-y-6"
    >
        {% csrf_token %}

        <!-- Row 1: Nombre y Email -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Nombre -->
            <div>
                <label for="{{ form.nombre.id_for_label }}" class="block text-sm font-bold text-slate-700 mb-2">
                    {{ form.nombre.label }}
                </label>
                {{ form.nombre }}
                {% if form.nombre.errors %}
                    <p class="text-red-500 text-xs mt-2">{{ form.nombre.errors.0 }}</p>
                {% endif %}
            </div>

            <!-- Email -->
            <div>
                <label for="{{ form.email.id_for_label }}" class="block text-sm font-bold text-slate-700 mb-2">
                    {{ form.email.label }}
                </label>
                {{ form.email }}
                {% if form.email.errors %}
                    <p class="text-red-500 text-xs mt-2">{{ form.email.errors.0 }}</p>
                {% endif %}
            </div>
        </div>

        <!-- Row 2: Teléfono y Empresa -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Teléfono -->
            <div>
                <label for="{{ form.telefono.id_for_label }}" class="block text-sm font-bold text-slate-700 mb-2">
                    {{ form.telefono.label }}
                </label>
                {{ form.telefono }}
                {% if form.telefono.errors %}
                    <p class="text-red-500 text-xs mt-2">{{ form.telefono.errors.0 }}</p>
                {% endif %}
            </div>

            <!-- Empresa -->
            <div>
                <label for="{{ form.empresa.id_for_label }}" class="block text-sm font-bold text-slate-700 mb-2">
                    {{ form.empresa.label }}
                </label>
                {{ form.empresa }}
                {% if form.empresa.errors %}
                    <p class="text-red-500 text-xs mt-2">{{ form.empresa.errors.0 }}</p>
                {% endif %}
            </div>
        </div>

        <!-- Servicio de Interés -->
        <div>
            <label for="{{ form.servicio_interes.id_for_label }}" class="block text-sm font-bold text-slate-700 mb-2">
                {{ form.servicio_interes.label }}
            </label>
            {{ form.servicio_interes }}
            {% if form.servicio_interes.errors %}
                <p class="text-red-500 text-xs mt-2">{{ form.servicio_interes.errors.0 }}</p>
            {% endif %}
        </div>

        <!-- Mensaje -->
        <div>
            <label for="{{ form.mensaje.id_for_label }}" class="block text-sm font-bold text-slate-700 mb-2">
                {{ form.mensaje.label }}
            </label>
            {{ form.mensaje }}
            {% if form.mensaje.errors %}
                <p class="text-red-500 text-xs mt-2">{{ form.mensaje.errors.0 }}</p>
            {% endif %}
        </div>

        <!-- Errores Generales del Formulario -->
        {% if form.non_field_errors %}
        <div class="bg-red-50 border border-red-200 rounded-2xl p-4">
            <p class="text-red-600 text-sm">{{ form.non_field_errors.0 }}</p>
        </div>
        {% endif %}

        <!-- Botón de Envío -->
        <button
            type="submit"
            class="w-full bg-smart-navy text-white py-5 px-8 rounded-2xl font-black uppercase tracking-widest hover:bg-smart-blue transition-all shadow-xl btn-glow-blue text-sm"
        >
            <span class="htmx-indicator">
                <i class="fa-solid fa-spinner fa-spin mr-2"></i>
                Enviando...
            </span>
            <span class="htmx-non-indicator">
                Iniciar Transformación
                <i class="fa-solid fa-arrow-right ml-2"></i>
            </span>
        </button>
    </form>
</div>

<style>
    /* HTMX Loading Indicator */
    .htmx-request .htmx-indicator {
        display: inline;
    }

    .htmx-request .htmx-non-indicator {
        display: none;
    }

    .htmx-indicator {
        display: none;
    }
</style>
